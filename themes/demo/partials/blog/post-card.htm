<div class="col {{ cssClass|default('') }}">
    <div class="card card-post mb-5 h-100 d-flex flex-column">
        {% if post.banner %}
            <div class="card-banner {{ bannerCss|default('') }}">
                <img src="{{ post.banner.path }}" alt="" />
            </div>
        {% else %}
            <div class="card-banner {{ bannerCss|default('') }}">
                <img src="{{ partial('site/helpers/random-stock-image') }}" alt="" />
            </div>
        {% endif %}

        <div class="card-body">
            {% if post.categories %}
                <div class="blog-post-categories">
                    <ul class="list-inline">
                        {% for category in post.categories %}
                            <li class="list-inline-item">
                                &mdash; <a href="{{ 'blog/category'|page({ slug: category.slug, id: category.id }) }}">{{ category.title }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <h4 class="card-title line-clamp-2">
                <a href="{{ 'blog/post'|page({ slug: post.slug, id: post.id }) }}" class="stretched-link">{{ post.title }}</a>
            </h4>

            <div class="featured-text">
                {% set _excerpt = (post.featured_text|default(''))|striptags %}
                {% set _max = 130 %}
                {% if _excerpt|length > _max %}
                    <p class="line-clamp-4">{{ _excerpt|slice(0, _max) ~ '...' }}</p>
                {% else %}
                    <p class="line-clamp-4">{{ _excerpt }}</p>
                {% endif %}
            </div>
        </div>

        <div class="card-footer mt-auto">
            <div class="card-meta">
                <div class="meta-item meta-date text-icon text-icon-date">
                    {{ post.published_at_date|date('j M Y') }}
                </div>
                {% if post.author %}
                    <div class="meta-item meta-divider">
                        &bull;
                    </div>
                    <div class="meta-item meta-author text-icon text-icon-author">
                        By <a href="{{ 'blog/author'|page({ slug: post.author.slug }) }}">
                            {{ post.author.title|default('') }}
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
